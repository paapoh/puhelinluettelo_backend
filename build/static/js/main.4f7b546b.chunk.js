(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(16),c=t.n(a),r=t(3),i=t(2),o=t(4),u=t.n(o),d="/api/persons",s=function(){return u.a.get(d)},l=function(e){return u.a.post(d,e)},j=function(e,n){return u.a.put("".concat(d,"/").concat(e),n)},b=function(e){return u.a.delete("".concat(d,"/").concat(e))},h=t(0),f=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(h.jsxs)("div",{children:["filter shown with: ",Object(h.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.persons,t=e.newFilter,a=e.setPersons,c=e.handleAddedTime,r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(h.jsx)("div",{children:r.map((function(e){return Object(h.jsxs)("p",{children:[" ",e.name," ",e.number,Object(h.jsx)("button",{onClick:function(){return function(e){window.confirm("Poistetaanko k\xe4ytt\xe4j\xe4 ".concat(e.name))&&b(e.id).then((function(t){a(n.filter((function(n){return n.id!==e.id}))),c("Removed ".concat(e.name))}))}(e)},children:"delete"})]},e.name)}))})},O=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:a})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:c,onChange:r})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",onClick:n,children:"add"})})]})},p=function(e){var n=e.message,t=e.style;return null===n?null:Object(h.jsx)("div",{className:t,children:n})},v=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(""),o=Object(r.a)(c,2),u=o[0],d=o[1],b=Object(i.useState)(""),v=Object(r.a)(b,2),x=v[0],w=v[1],g=Object(i.useState)(""),C=Object(r.a)(g,2),N=C[0],k=C[1],y=Object(i.useState)(null),S=Object(r.a)(y,2),F=S[0],P=S[1],A=Object(i.useState)("alertGreen"),R=Object(r.a)(A,2),T=R[0],E=R[1];Object(i.useEffect)((function(){s().then((function(e){a(e.data)}))}),[]);var G=function(e){P(e),setTimeout((function(){P(null),E("alertGreen")}),3e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(p,{message:F,style:T}),Object(h.jsx)(f,{newFilter:N,handleFilterChange:function(e){k(e.target.value)}}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(O,{newName:u,newNumber:x,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){w(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:u,number:x};t.map((function(e){return e.name})).includes(u)?window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&j(t.find((function(e){return e.name===u})).id,n).then((function(e){a(t.map((function(t){return t.id!==e.data.id?t:n}))),G("Changed ".concat(e.data.name," number"))})).catch((function(e){E("alertRed"),G("Information of ".concat(u," has already been removed from server"))})):l(n).then((function(e){a(t.concat(e.data)),G("Added ".concat(e.data.name))})).catch((function(e){E("alertRed"),G(e.response.data.error)})),d(""),w("")}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(m,{persons:t,newFilter:N,setPersons:a,handleAddedTime:G})]})};t(40);c.a.render(Object(h.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4f7b546b.chunk.js.map