{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseurl","axios","get","newObject","post","id","put","delete","Filter","newFilter","handleFilterChange","value","onChange","Persons","persons","setPersons","handleAddedTime","personsToShow","filter","person","name","toLowerCase","includes","map","number","onClick","window","confirm","personService","then","response","person2","handleDelete","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Notification","message","style","className","App","useState","setNewName","setNewNumber","setNewFilter","addedMessage","setAddedMessage","alertColor","setAlertColor","useEffect","data","setTimeout","event","target","preventDefault","personObject","find","catch","reason","concat","error","ReactDOM","render","document","getElementById"],"mappings":"kMACMA,EAAU,eAkBD,EAhBA,kBACXC,IAAMC,IAAIF,IAeC,EAZA,SAAAG,GAAS,OACpBF,IAAMG,KAAKJ,EAASG,IAWT,EARA,SAACE,EAAIF,GAAL,OACXF,IAAMK,IAAN,UAAaN,EAAb,YAAwBK,GAAMF,IAOnB,EAJH,SAACE,GAAD,OACRJ,IAAMM,OAAN,UAAgBP,EAAhB,YAA2BK,K,OCbzBG,EAAS,SAAC,GAAD,IAAEC,EAAF,EAAEA,UAAWC,EAAb,EAAaA,mBAAb,OACb,sDACuB,uBACfC,MAAOF,EACPG,SAAUF,QAKdG,EAAU,SAAC,GAAuD,IAAtDC,EAAqD,EAArDA,QAASL,EAA4C,EAA5CA,UAAWM,EAAiC,EAAjCA,WAAYC,EAAqB,EAArBA,gBAC1CC,EACNH,EAAQI,QAAO,SAAAC,GAAM,OAAIA,EAAOC,KAAKC,cACpCC,SAASb,EACPY,kBAeH,OACI,8BACKJ,EAAcM,KAAI,SAAAJ,GAAM,OACvB,kCAAuBA,EAAOC,KAA9B,IAAqCD,EAAOK,OAC1C,wBAAQC,QAAS,kBAfR,SAACN,GACjBO,OAAOC,QAAP,yCAAwCR,EAAOC,QAChDQ,EACOT,EAAOd,IACXwB,MAAK,SAAAC,GACJf,EAAWD,EAAQI,QAAO,SAAAa,GAAO,OAAIA,EAAQ1B,KAAOc,EAAOd,OAC3DW,EAAgB,WAAD,OAAYG,EAAOC,UASPY,CAAab,IAApC,sBADMA,EAAOC,YAQrBa,EAAa,SAAC,GAAD,IAAEC,EAAF,EAAEA,UAAWC,EAAb,EAAaA,QAASC,EAAtB,EAAsBA,iBAAkBC,EAAxC,EAAwCA,UAAWC,EAAnD,EAAmDA,mBAAnD,OACjB,uBAAMC,SAAUL,EAAhB,UACI,yCACU,uBACFvB,MAAOwB,EACPvB,SAAUwB,OAGlB,2CACY,uBACJzB,MAAO0B,EACPzB,SAAU0B,OAGlB,8BACI,wBAAQE,KAAK,SAASf,QAASS,EAA/B,uBAKJO,EAAe,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,MAC/B,OAAgB,OAAZD,EACK,KAIP,qBAAKE,UAAWD,EAAhB,SACGD,KAiGQG,EA5FH,WACV,MAA+BC,mBAAS,IAAxC,mBAAQhC,EAAR,KAAiBC,EAAjB,KACA,EAAgC+B,mBAAS,IAAzC,mBAAQX,EAAR,KAAiBY,EAAjB,KACA,EAAoCD,mBAAS,IAA7C,mBAAQT,EAAR,KAAmBW,EAAnB,KACA,EAAoCF,mBAAS,IAA7C,mBAAQrC,EAAR,KAAmBwC,EAAnB,KACA,EAAyCH,mBAAS,MAAlD,mBAAQI,EAAR,KAAsBC,EAAtB,KACA,EAAsCL,mBAAS,cAA/C,mBAAQM,EAAR,KAAoBC,EAApB,KAEAC,qBAAU,WACR1B,IAEGC,MAAK,SAAAC,GACJf,EAAWe,EAASyB,WAEvB,IAEH,IAYMvC,EAAkB,SAAC0B,GACvBS,EAAgBT,GAChBc,YAAW,WACTL,EAAgB,MAChBE,EAAc,gBACb,MAuCL,OACE,gCACE,2CACA,cAAC,EAAD,CAAcX,QAASQ,EAAcP,MAAOS,IAC5C,cAAC,EAAD,CAAQ3C,UAAWA,EAAWC,mBApDP,SAAC+C,GAC1BR,EAAaQ,EAAMC,OAAO/C,UAoDxB,2CACA,cAAC,EAAD,CACEwB,QAASA,EACTE,UAAWA,EACXD,iBAjEmB,SAACqB,GACxBV,EAAWU,EAAMC,OAAO/C,QAiEpB2B,mBA9DqB,SAACmB,GAC1BT,EAAaS,EAAMC,OAAO/C,QA8DtBuB,UA/CY,SAACuB,GACjBA,EAAME,iBACN,IAAMC,EAAe,CACnBxC,KAAMe,EACNX,OAAQa,GAEPvB,EAAQS,KAAI,SAAAJ,GAAM,OAAIA,EAAOC,QAAME,SAASa,GAC1CT,OAAOC,QAAP,UAAkBQ,EAAlB,4EACDP,EACUd,EAAQ+C,MAAK,SAAA1C,GAAM,OAAIA,EAAOC,OAASe,KAAS9B,GAAIuD,GAC3D/B,MAAK,SAAAC,GACJf,EAAWD,EAAQS,KAAI,SAAAJ,GAAM,OAAIA,EAAOd,KAAOyB,EAASyB,KAAKlD,GAAKc,EAASW,EAASyB,SACpFvC,EAAgB,WAAD,OAAYc,EAASyB,KAAKnC,KAA1B,eAEhB0C,OAAM,SAAAC,GACLV,EAAc,YACdrC,EAAgB,kBAAD,OAAmBmB,EAAnB,6CAKvBP,EACUgC,GACP/B,MAAK,SAAAC,GACJf,EAAWD,EAAQkD,OAAOlC,EAASyB,OACnCvC,EAAgB,SAAD,OAAUc,EAASyB,KAAKnC,UAExC0C,OAAM,SAAAG,GACLZ,EAAc,YACdrC,EAAgBiD,EAAMnC,SAASyB,KAAKU,UAGxClB,EAAW,IACXC,EAAa,OAgBX,yCACA,cAAC,EAAD,CAASlC,QAASA,EAASL,UAAWA,EAAWM,WAAYA,EAAYC,gBAAiBA,Q,MC5JhGkD,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.27fa55cb.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseurl = '/api/persons'\r\n\r\nconst getAll = () => (\r\n    axios.get(baseurl)\r\n)\r\n\r\nconst create = newObject => (\r\n    axios.post(baseurl, newObject)\r\n)\r\n\r\nconst update = (id, newObject) => (\r\n    axios.put(`${baseurl}/${id}`, newObject)\r\n)\r\n\r\nconst del = (id) => (\r\n    axios.delete(`${baseurl}/${id}`)\r\n)\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    del: del\r\n}","import React, {useState, useEffect} from 'react'\nimport personService from './services/persons'\n\nconst Filter = ({newFilter, handleFilterChange}) => (\n  <div>\n      filter shown with: <input\n          value={newFilter}\n          onChange={handleFilterChange}\n  />\n  </div>\n)\n\nconst Persons = ({persons, newFilter, setPersons, handleAddedTime}) => {\n  const personsToShow = \n  persons.filter(person => person.name.toLowerCase()\n  .includes(newFilter\n    .toLowerCase()\n    )\n  )\n\n  const handleDelete = (person) => {\n    if(window.confirm(`Poistetaanko käyttäjä ${person.name}`)){\n      personService\n        .del(person.id)\n        .then(response => {\n          setPersons(persons.filter(person2 => person2.id !== person.id))\n          handleAddedTime(`Removed ${person.name}`)\n        })\n    }\n  }\n\n  return(\n      <div>\n          {personsToShow.map(person => \n            <p key={person.name}> {person.name} {person.number} \n              <button onClick={() => handleDelete(person)}>delete</button>\n            </p>\n          )}\n      </div>\n  )\n}\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => (\n  <form onSubmit={addPerson}>\n      <div>\n          name: <input \n              value={newName}\n              onChange={handleNameChange}\n          />\n      </div>\n      <div>\n          number: <input \n              value={newNumber}\n              onChange={handleNumberChange}\n          />\n      </div>\n      <div>\n          <button type=\"submit\" onClick={addPerson}>add</button>\n      </div>\n  </form>\n)\n\nconst Notification = ({ message, style}) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={style}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ addedMessage, setAddedMessage] = useState(null)\n  const [ alertColor, setAlertColor ] = useState('alertGreen')\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n    })\n  }, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const handleAddedTime = (message) => {\n    setAddedMessage(message)\n    setTimeout(() => {\n      setAddedMessage(null)\n      setAlertColor('alertGreen')\n    }, 3000)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n    if(persons.map(person => person.name).includes(newName)){\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n        personService\n          .update(persons.find(person => person.name === newName).id, personObject)\n          .then(response => {\n            setPersons(persons.map(person => person.id !== response.data.id ? person : response.data))\n            handleAddedTime(`Changed ${response.data.name} number`)\n          })\n          .catch(reason => {\n            setAlertColor('alertRed')\n            handleAddedTime(`Information of ${newName} has already been removed from server`)\n          })\n      }\n    }\n    else{\n    personService\n      .create(personObject)\n      .then(response => {\n        setPersons(persons.concat(response.data))\n        handleAddedTime(`Added ${response.data.name}`)\n      })\n      .catch(error => {\n        setAlertColor('alertRed')\n        handleAddedTime(error.response.data.error)\n      })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={addedMessage} style={alertColor}/>\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\n      <h2>add a new</h2>\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addPerson={addPerson}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} newFilter={newFilter} setPersons={setPersons} handleAddedTime={handleAddedTime}/>\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}